<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Cost Profiler - Flamegraph Wireframe</title>
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  :root {
    --bg-base: #0a0a0f; --bg-surface: #111118; --bg-elevated: #1a1a24;
    --bg-muted: #23232f; --text-primary: #e8e8ed; --text-secondary: #9494a8;
    --text-muted: #5c5c72; --cost-low: #34d399; --cost-medium: #fbbf24;
    --cost-high: #f87171; --accent: #818cf8; --accent2: #38bdf8;
    --border: #1e1e2e; --font-sans: "Inter", system-ui, sans-serif;
    --font-mono: "JetBrains Mono", "Fira Code", monospace;
  }
  body { background: var(--bg-base); color: var(--text-primary); font-family: var(--font-sans); font-size: 14px; line-height: 1.5; }
  .app { display: grid; grid-template-columns: 220px 1fr; min-height: 100vh; }
  @media (max-width: 767px) { .app { grid-template-columns: 1fr; } .sidebar { display: none; } }

  .sidebar { background: var(--bg-surface); border-right: 1px solid var(--border); padding: 20px 0; }
  .sidebar-brand { padding: 0 16px 20px; font-size: 16px; font-weight: 600; color: var(--accent); }
  .sidebar-nav a { display: flex; align-items: center; gap: 10px; padding: 10px 16px; color: var(--text-secondary); text-decoration: none; font-size: 13px; border-left: 3px solid transparent; }
  .sidebar-nav a.active, .sidebar-nav a:hover { color: var(--text-primary); background: var(--bg-elevated); border-left-color: var(--accent); }

  .main { padding: 24px; max-width: 1220px; }
  .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; flex-wrap: wrap; gap: 12px; }
  .header h1 { font-size: 20px; font-weight: 600; }
  .controls { display: flex; gap: 8px; }
  .btn { background: var(--bg-surface); border: 1px solid var(--border); color: var(--text-secondary); padding: 6px 14px; border-radius: 6px; font-size: 12px; cursor: pointer; }
  .btn:hover { background: var(--bg-elevated); color: var(--text-primary); }
  .btn-accent { background: var(--accent); color: #fff; border-color: var(--accent); }

  .card { background: var(--bg-surface); border: 1px solid var(--border); border-radius: 8px; padding: 20px; margin-bottom: 16px; }
  .annotation { background: var(--bg-muted); border-left: 3px solid var(--accent); padding: 8px 12px; margin: 16px 0; font-size: 11px; color: var(--text-secondary); border-radius: 0 4px 4px 0; }

  /* Breadcrumb */
  .breadcrumb { display: flex; gap: 6px; align-items: center; margin-bottom: 16px; font-size: 12px; }
  .breadcrumb span { color: var(--text-muted); }
  .breadcrumb a { color: var(--accent); text-decoration: none; }
  .breadcrumb a:hover { text-decoration: underline; }

  /* Flamegraph */
  .flame-row { display: flex; width: 100%; margin-bottom: 2px; }
  .flame-bar { height: 28px; display: flex; align-items: center; padding: 0 8px; font-size: 11px; font-family: var(--font-mono); border-radius: 2px; cursor: pointer; transition: filter 0.15s; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .flame-bar:hover { filter: brightness(1.3); }
  .flame-level { font-size: 10px; color: var(--text-muted); width: 70px; flex-shrink: 0; display: flex; align-items: center; }

  /* Cost Legend */
  .legend { display: flex; gap: 16px; margin: 16px 0; font-size: 12px; }
  .legend-item { display: flex; align-items: center; gap: 6px; color: var(--text-secondary); }
  .legend-swatch { width: 24px; height: 12px; border-radius: 2px; }

  /* Details Panel */
  .details-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; }
  .detail-item { display: flex; flex-direction: column; gap: 4px; }
  .detail-label { font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-muted); }
  .detail-value { font-family: var(--font-mono); font-size: 16px; font-weight: 600; }
  .detail-sub { font-size: 12px; color: var(--text-secondary); }

  .section-title { font-size: 14px; font-weight: 600; margin-bottom: 12px; }
</style>
</head>
<body>
<div class="app">
  <nav class="sidebar">
    <div class="sidebar-brand">AI Cost Profiler</div>
    <div class="sidebar-nav">
      <a href="dashboard.html">&#9632; Dashboard</a>
      <a href="flamegraph.html" class="active">&#9650; Flamegraph</a>
      <a href="prompt-analysis.html">&#9679; Prompt Analysis</a>
    </div>
  </nav>

  <main class="main">
    <div class="header">
      <h1>Cost Flamegraph</h1>
      <div class="controls">
        <button class="btn">Reset Zoom</button>
        <button class="btn">Sort: Cost</button>
        <button class="btn btn-accent">Export</button>
      </div>
    </div>

    <div class="breadcrumb">
      <a href="#">All Features</a> <span>&#8250;</span>
      <a href="#">Chat</a> <span>&#8250;</span>
      <span style="color:var(--text-primary)">completion</span>
    </div>

    <div class="annotation">WIREFRAME: Flamegraph with stacked bars (Feature > Endpoint > Model). Width = cost proportion. Click to zoom.</div>

    <!-- Flamegraph -->
    <div class="card">
      <div class="section-title">Cost Hierarchy (Total: $1,284.52)</div>

      <!-- Level 0: Root -->
      <div class="flame-row">
        <span class="flame-level">Root</span>
        <div class="flame-bar" style="width:100%; background:rgba(129,140,248,0.3); color:var(--text-primary);">all features — $1,284.52</div>
      </div>

      <!-- Level 1: Features -->
      <div class="flame-row">
        <span class="flame-level">Feature</span>
        <div class="flame-bar" style="width:42%; background:rgba(248,113,113,0.5); color:#fff;">Chat — $542.18</div>
        <div class="flame-bar" style="width:25%; background:rgba(248,113,113,0.35); color:#fff;">Summarize — $318.45</div>
        <div class="flame-bar" style="width:16%; background:rgba(251,191,36,0.4); color:#fff;">Embeddings — $201.30</div>
        <div class="flame-bar" style="width:11%; background:rgba(251,191,36,0.3); color:#fff;">Classify — $142</div>
        <div class="flame-bar" style="width:6%; background:rgba(52,211,153,0.4); color:#fff;">Auto</div>
      </div>

      <!-- Level 2: Endpoints (for Chat) -->
      <div class="flame-row">
        <span class="flame-level">Endpoint</span>
        <div class="flame-bar" style="width:28%; background:rgba(248,113,113,0.6); color:#fff;">/chat/completion — $362</div>
        <div class="flame-bar" style="width:14%; background:rgba(248,113,113,0.4); color:#fff;">/chat/stream — $180</div>
        <div class="flame-bar" style="width:17%; background:rgba(251,191,36,0.45); color:#fff;">/summarize/doc — $218</div>
        <div class="flame-bar" style="width:8%; background:rgba(251,191,36,0.3); color:#fff;">/summ/url</div>
        <div class="flame-bar" style="width:33%; background:rgba(129,140,248,0.15);"></div>
      </div>

      <!-- Level 3: Models -->
      <div class="flame-row">
        <span class="flame-level">Model</span>
        <div class="flame-bar" style="width:18%; background:rgba(248,113,113,0.7); color:#fff;">GPT-4o — $231</div>
        <div class="flame-bar" style="width:10%; background:rgba(248,113,113,0.5); color:#fff;">Claude 3.5 — $131</div>
        <div class="flame-bar" style="width:8%; background:rgba(251,191,36,0.5); color:#fff;">GPT-4o — $105</div>
        <div class="flame-bar" style="width:6%; background:rgba(251,191,36,0.35); color:#fff;">mini — $75</div>
        <div class="flame-bar" style="width:12%; background:rgba(251,191,36,0.5); color:#fff;">GPT-4o — $155</div>
        <div class="flame-bar" style="width:46%; background:rgba(129,140,248,0.1);"></div>
      </div>
    </div>

    <!-- Cost Legend -->
    <div class="legend">
      <div class="legend-item"><div class="legend-swatch" style="background:rgba(248,113,113,0.6)"></div>High ($200+)</div>
      <div class="legend-item"><div class="legend-swatch" style="background:rgba(251,191,36,0.5)"></div>Medium ($50-200)</div>
      <div class="legend-item"><div class="legend-swatch" style="background:rgba(52,211,153,0.5)"></div>Low (&lt;$50)</div>
    </div>

    <div class="annotation">WIREFRAME: Click-to-reveal details panel showing breakdown for selected flamegraph segment</div>

    <!-- Details Panel -->
    <div class="card">
      <div class="section-title">Selected: /chat/completion > GPT-4o</div>
      <div class="details-grid">
        <div class="detail-item">
          <span class="detail-label">Cost (24h)</span>
          <span class="detail-value" style="color:var(--cost-high)">$231.40</span>
          <span class="detail-sub">18.0% of total</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Requests</span>
          <span class="detail-value">8,412</span>
          <span class="detail-sub">~$0.028 / request</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Tokens (in / out)</span>
          <span class="detail-value">4.1M / 1.2M</span>
          <span class="detail-sub">Avg 487 in, 143 out</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Avg Latency</span>
          <span class="detail-value">920ms</span>
          <span class="detail-sub">P95: 2,140ms</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Cache Hit Rate</span>
          <span class="detail-value" style="color:var(--cost-medium)">42%</span>
          <span class="detail-sub">Potential savings: $98</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Optimization</span>
          <span class="detail-value" style="color:var(--accent)">Switch to GPT-4o-mini</span>
          <span class="detail-sub">Est. savings: $185/day</span>
        </div>
      </div>
    </div>
  </main>
</div>
</body>
</html>
